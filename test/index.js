import { expect } from "chai";
import { parseMarkdown } from "../src";

describe("parseMarkdown", () => {
  it("should return parsed markdown tokens", () => {
    expect(
      parseMarkdown(
        "#residents\n–¶—ñ–∫–∞–≤–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –¥–ª—è –≤–µ—á—ñ—Ä–Ω—å–æ–≥–æ —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ —á—É–¥–æ–≤–∞ –Ω–∞–≥–æ–¥–∞ –ø–æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—è –±–ª–∏–∂—á–µ –∑ andcards: https://www.andcards.com"
      )
    ).is.deep.equal([
      { hashtag: "residents", type: "hashtag", value: "#residents" },
      {
        type: "text",
        value: "\n–¶—ñ–∫–∞–≤–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –¥–ª—è –≤–µ—á—ñ—Ä–Ω—å–æ–≥–æ —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ —á—É–¥–æ–≤–∞ –Ω–∞–≥–æ–¥–∞ –ø–æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—è –±–ª–∏–∂—á–µ –∑ andcards: ",
      },
      { href: "https://www.andcards.com", type: "link", value: "https://www.andcards.com" },
    ]);
    expect(
      parseMarkdown(
        "–í–µ—á—ñ—Ä –ø'—è—Ç–Ω–∏—Ü—ñ –¥–ª—è –≤—ñ–¥–≤–µ—Ä—Ç–∏—Ö —Ç–µ–º —ñ –º—ñ—Ü–Ω–∏—Ö –∂–∞—Ä—Ç—ñ–≤. –ê–ª–µ —Ü—å–æ–≥–æ —Ä–∞–∑—É –ø—Ä–∏—Å—Ç–æ–π–Ω–æ! –ü—Ä–∏—Ö–æ–¥—å—Ç–µ –Ω–∞ [–ü—Ä–∏—Å—Ç–æ–π–Ω–∏–π –°—Ç–Ω–¥–∞–ø](https://www.facebook.com/events/656828768259069/?acontext=%7B%22event_action_history%22%3A[%7B%22mechanism%22%3A%22search_results%22%2C%22surface%22%3A%22search%22%7D]%7D) –≤—ñ–¥—Å–≤—è—Ç–∫—É–≤–∞—Ç–∏ –∫—ñ–Ω–µ—Ü—å —Ä–æ–±–æ—á–æ–≥–æ —Ç–∏–∂–Ω—èüí™üèº"
      )
    ).is.deep.equal([
      {
        type: "text",
        value: "–í–µ—á—ñ—Ä –ø'—è—Ç–Ω–∏—Ü—ñ –¥–ª—è –≤—ñ–¥–≤–µ—Ä—Ç–∏—Ö —Ç–µ–º —ñ –º—ñ—Ü–Ω–∏—Ö –∂–∞—Ä—Ç—ñ–≤. –ê–ª–µ —Ü—å–æ–≥–æ —Ä–∞–∑—É –ø—Ä–∏—Å—Ç–æ–π–Ω–æ! –ü—Ä–∏—Ö–æ–¥—å—Ç–µ –Ω–∞ ",
      },
      {
        href:
          "https://www.facebook.com/events/656828768259069/?acontext=%7B%22event_action_history%22%3A[%7B%22mechanism%22%3A%22search_results%22%2C%22surface%22%3A%22search%22%7D]%7D",
        type: "link",
        value: "–ü—Ä–∏—Å—Ç–æ–π–Ω–∏–π –°—Ç–Ω–¥–∞–ø",
      },
      { type: "text", value: " –≤—ñ–¥—Å–≤—è—Ç–∫—É–≤–∞—Ç–∏ –∫—ñ–Ω–µ—Ü—å —Ä–æ–±–æ—á–æ–≥–æ —Ç–∏–∂–Ω—èüí™üèº" },
    ]);
    expect(
      parseMarkdown(
        "–í–µ—á—ñ—Ä –ø'—è—Ç–Ω–∏—Ü—ñ –¥–ª—è #–≤—ñ–¥–≤–µ—Ä—Ç–∏—Ö —Ç–µ–º —ñ –º—ñ—Ü–Ω–∏—Ö –∂–∞—Ä—Ç—ñ–≤. –ê–ª–µ —Ü—å–æ–≥–æ —Ä–∞–∑—É –ø—Ä–∏—Å—Ç–æ–π–Ω–æ! –ü—Ä–∏—Ö–æ–¥—å—Ç–µ –Ω–∞ [–ü—Ä–∏—Å—Ç–æ–π–Ω–∏–π #–°—Ç–Ω–¥–∞–ø](https://www.facebook.com/events/656828768259069/?#hash) –≤—ñ–¥—Å–≤—è—Ç–∫—É–≤–∞—Ç–∏ –∫—ñ–Ω–µ—Ü—å —Ä–æ–±–æ—á–æ–≥–æ —Ç–∏–∂–Ω—èüí™üèº"
      )
    ).is.deep.equal([
      { type: "text", value: "–í–µ—á—ñ—Ä –ø'—è—Ç–Ω–∏—Ü—ñ –¥–ª—è " },
      { hashtag: "–≤—ñ–¥–≤–µ—Ä—Ç–∏—Ö", type: "hashtag", value: "#–≤—ñ–¥–≤–µ—Ä—Ç–∏—Ö" },
      { type: "text", value: " —Ç–µ–º —ñ –º—ñ—Ü–Ω–∏—Ö –∂–∞—Ä—Ç—ñ–≤. –ê–ª–µ —Ü—å–æ–≥–æ —Ä–∞–∑—É –ø—Ä–∏—Å—Ç–æ–π–Ω–æ! –ü—Ä–∏—Ö–æ–¥—å—Ç–µ –Ω–∞ " },
      { href: "https://www.facebook.com/events/656828768259069/?#hash", type: "link", value: "–ü—Ä–∏—Å—Ç–æ–π–Ω–∏–π #–°—Ç–Ω–¥–∞–ø" },
      { type: "text", value: " –≤—ñ–¥—Å–≤—è—Ç–∫—É–≤–∞—Ç–∏ –∫—ñ–Ω–µ—Ü—å —Ä–æ–±–æ—á–æ–≥–æ —Ç–∏–∂–Ω—èüí™üèº" },
    ]);
    expect(parseMarkdown(`__[anchor](https://www.facebook.com)__`)).is.deep.equal([
      {
        children: [{ type: "link", href: "https://www.facebook.com", value: "anchor" }],
        type: "bold",
      },
    ]);
    expect(parseMarkdown(`#first_hash #second_hash`)).is.deep.equal([
      { type: "hashtag", hashtag: "first_hash", value: "#first_hash" },
      { type: "text", value: " " },
      { type: "hashtag", hashtag: "second_hash", value: "#second_hash" },
    ]);
    expect(parseMarkdown(`#first*hash #second*hash @mention*bold`)).is.deep.equal([
      { type: "hashtag", hashtag: "first*hash", value: "#first*hash" },
      { type: "text", value: " " },
      { type: "hashtag", hashtag: "second*hash", value: "#second*hash" },
      { type: "text", value: " " },
      { type: "mention", mention: "mention", value: "@mention" },
      { type: "text", value: "*bold" },
    ]);
  });
});
